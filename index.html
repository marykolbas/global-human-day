<html>
  <head>
    <title>INFO 4310 - HW 2</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap">

    <style>
        body {
            display: flex;
        }

        #category-filters {
            display: flex;
            flex-direction: column;
        }
    </style>
  </head>

  <body>
    <aside id="controls-sidebar" height="800">
        <div id="category-filters"></div>
    </aside> 
    <svg id="scatterplot" width="800" height="800"></svg>
  </body>

  <script>
    const requestData = async function() {
      const countries = await d3.csv("all_countries.csv", d3.autoType);

      // populating category filter buttons with unique categories from the data
      const categoryList = [...new Set(countries.map(item => item.Category))];
      categoryList.forEach((category) => {
        document.getElementById("category-filters").innerHTML += `<button class="category-filter">${category}</button>`
      });

      // initializing filtered subset to first category in the data
      let filteredData = countries.filter((country) => country.Category == categoryList[0]);

      // event listeners for category filter buttons
      d3.selectAll(".category-filter").on("click", function(){
        filteredData = countries.filter((country) => country.Category == d3.select(this).text());
        console.log(filteredData);
      });
    }
    requestData();

  </script>
</html>
